# 조인연산방식, 조인알고리즘, 오브젝트스캔유형 내용정리

## 조인 연산방식

- 내부 조인
- 왼쪽 외부 조인
- 오른쪽 외부 조인 (잘안씀)
- 교차 조인 (잘안씀)
- 교차 조인 (잘안씀)

## 조인 알고리즘

```
# 중첩 루프 조인
- 드라이빙 테이블 데이터 1건당 매번 드리븐 테이블을 탐색하여 최종적으로 양쪽 테이블의 공통된 데이터를 출력하는 방식.

# 블록 중첩 루프 조인
- 중첩 루프 조인의 매번 드리븐 테이블을 탐색하는 특성을 개선하기 위해 블록 중첩 루프 조인을 사용한다.
- 블록 중첩 루프 조인은 인덱스를 적용할 수 없는 드리븐 테이블에 중첩 루프 조인을 하려 할때 성능 개선에 목적을 둔다.
- 드라이빙 테이블에서 사용할 데이터들을 조인 버퍼에 적재한다. 이어서 조인 버퍼와 드라이븐 테이블를 각 데이터별로 조인한다. 그럼 한번의 테이블 풀 스캔으로 원하는 데이터를 모두 찾는다.

# 배치 키 액세스 조인 (???)
- 중첩 루프 조인 방식에서 인덱스의 탐색 대상 범위가 넓다면 랜덤 액세스 때문에 성능이 떨어진다. 이 문제 해결을 위해 배치 키 액세스 조인을 사용한다.

# 해시 조인
- 적용할 인덱스가 없어 중첩 루프조인이 비효율적이거나 대용량 테이블을 조인해야할 때 사용가능.
- 두 테이블중 작은 테이브을 이용한 해쉬 테이블 생성
- 큰 테이블의 조인 값을 해시함수를 거쳐 버킷 주소를 알아낸다. 버킷에 접근해서 해쉬 체인을 스캔하면서 조인 데이터를 탐색한다.
- 드라이빙 테이블의 데이터 해시값과 드리븐 테이블의 데이터 해시값을 서로 비교해서 동일한 경우에만 조인 버퍼에 저장한다.
```

## 오브젝트 스캔 종류

```
종류
- 테이블 스캔 : 인덱스 안거치고 디스크 위치한 테이블에 접근하는 유형
- 인덱스 스캔 : 인덱스로 디스크 위치한 테이블에 접근하는 유형

- 테이블 풀 스캔 방식 : 테이블 처음부터 끝까지 데이터를 흝어보는 방식.
- 인덱스 범위 스캔 : WHERE절에 비교 연산 및 LIKE 구문이 포함시 수행. 스캔하고자하는 범위가 넓어질수록 비효율적이다.
- 인덱스 풀 스캔 : 인덱스 처음부터 끝까지 데이터를 흝어보는 방식. 인덱스로 구성되는 열 정보만 취하기에 테이블에는 접근하지 않는다.
- 인덱스 고유 스캔 : 기본키나 고유 인덱스로 테이블에 접근하는 방식. WHERE 조건절에 동등 비교시 수행. 인덱스를 사용하는 스캔 방식 중 가장 효율적인 스캔 방식이다.
- 인덱스 루스 스캔 : 인덱스 범위 스캔처럼 넓은 범위에 접근하지 않고, WHERE 절 기준 필요하지 않은 인덱스 키는 무시한다. 보통 GROUP BY 구문에서 MAX, MIN 함수 사용시 수행되며, 정렬된 인덱스에서 최대값 최소값 찾을때 유용하다.
- 인덱스 병합  스캔 : WHERE문 조건절의 열들이 서로 다른 인덱스로 존재할때, 여러 인덱스를 가져와서 모두 활용하는 방식이다. 인덱스 병합방식은 개별 인덱스를 각각 수행해야되서 시간이 배로 걸린다. 그래서 같이 비교하는 컬럼들은 하나의 인덱스로 따로 만들어서 사용하도록 튜닝을 해야한다.
```

## 디스크 접근방식 

```
스토리지(디스크)의 페이지에 접근하는 방식을 말한다. 페이지는 데이터 검색의 최소 단위다. 연결된 페이지를 차례대로 읽을 경우 시퀀셜 액세스, 랜덤으로 페이지를 읽어나갈 경우 랜덤 액세스라 한다.

- 시퀀셜 액세스 : 물리적으로 인접한 페이지를 차례대로 읽는 방식. 풀 스캔 방식에서 주로 사용
- 랜덤 액세스 : 페이지간의 물리적 위치를 고려하지 않고 접근한다. 최소한의 페이지에 접근할 수 있도록 접근 범위를 줄여 사용해야 한다.
```

## WHERE 조건절 유형

```
- 액세스조건 : 옵티마이저는 WHERE절 조건문으로 소량의 데이터를 가져오고, 인덱스를 통해 접근 시간을 줄인다. 스토리지 엔진의 데이터에 접근해서 MySQL 엔진으로 데이터를 가져온다.
- 필터조건 : 필터조건으로 필터링되어 제거될 데이터라면 애초에 스토리지 엔진에서 제외하는 것이 맞다.
```