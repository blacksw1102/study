## SQL 수행 프로세스
0. SQL 수행 과정에서 핵심 역학을 수행하는 오브젝트는 크게 파서, 전처리기, 옵티마이저, 엔진 실행기로 구분된다.
1. 사용자는 DB에서 원하는 데이터를 가져오고자 SQL문을 실행한다.
2. 실행된 SQL문은 MySQL 엔진에서 파서를 통해 문법 및 구분 검사를 진행한다.
3. 이후 옵터마이저는 사용자가 요청한 데이터를 빠르고 효율적으로 탐색하기 위해 전략적 계획을 수립한다.
4. 필요로 하는 데이터를 스토리지 엔진에서 MySQL 엔진으로 가져온다.
5. MySQL 엔진은 전달받은 데이터중 불필요한 부분을 필터링(제거, 변경)하고 필요한 연산을 수행한 뒤에 사용자에게 최종 결과를 알려준다.

### 파서
- 전달받은 SQL문을 최소 단위로 분리하고 트리로 구성한다.
- 구성된 트리로 문법 검사를 수행한다.

### 전처리기
- 파서가 생성한 트리를 토대로 SQL문에 구조적 문제가 없는지 파악.

### 옵티마이저
- 어떤 순서로 테이블에 접근할지, 인덱스 사용할지, 어떤 인덱스를 사용할지, 정렬 시 인덱스를 사용할지 아니면 임시 테이블을 사용할지와 같은 실행 계획을 수립한다.
- 옵티마이저가 수립한 모든 실행 계획이 항상 최적의 실행 계획을 제시하지는 않으므로 개발자의 검증을 필요로 한다.

### 엔진 실행기
- MySQL 엔진과 스토리지 엔진 양쪽에 걸치는 오브젝트
- 실행 계획에 따라 스토리지 엔진에서 데이터를 가져온다.
- MySQL 엔진에서 데이터를 정렬, 조인 및 필터링 작업을 거친다.
※ MySQL 엔진의 부하를 줄이려면 스토리지 엔진에서 가져오는 데이터양을 줄이는게 매우 중요하다.

## 스토리지 엔진
- 스토리지 엔진은 종류에 따라 InnoDB,.MyISAM 및 Memory가 있다.
- 온라인상의 트랜잭션 발생으로 데이터를 처리하는 OLTP 환경의 경우 InnoDB 엔진 사용
- 대량의 쓰기 트랜잭션이 발생하면 MyISAM 엔진 사용
- 메모리 데이터를 로드하여 빠르게 읽기 위해선 Memory 엔진 사용

- MariaDB의 기본키는 클러스터형 인덱스로 작동한다. 이는 기본키의 구성 열순서를 기준으로 물리적인 스토리지에 데이터가 쌓인다는 뜻이다. 즉 비슷한 기본 키 값들이 근거리에 적재되므로 기본 키를 활용하여 인덱스 스캔을 수행하면 테이블 데이터에 더 빠르게 접근할 수 있다.
- 기본 키와 똑같은 인덱스 생성은 물리적 공간을 낭비하고 데이터의 삽입/삭제/수정에 따른 인덱스 정렬에 오버헤드가 발생한다.

## 인덱스
- 데이터베이스에서 키값으로 실제 데이터 위치를 식별하고 데이터 접근 속도를 높이고자 생성되는, 키 기준으로 정렬된 오브젝트이다.
- 데이터 탐색 시, 처음 끝까지 전부 순차 탐색하는 비효율적 방식을 개선하고자 인덱스를 생성한다.
- 정렬된 각 키워드가 어느 곳에 있는지를 인덱스라는 이름으로 구성하면, 키워드 검색으로 원하는 페이지를 빠르게 찾을 수 있다.
- 저장된 데이터를 탐색해야 하는 경우가 많을 경우에는 인덱스를 설계하여 생성하는 과정이 매우 중요하다.
- 인덱스는 열의 속성에 따라 고유 인덱스(unique index) 및 비고유 인덱스(non-unique index)가 존재한다.

### 고유 인덱스
- 인덱스를 구성하는 열들이 유일하다. 즉 서로 중복되지 않고 유일성을 보장한다.
- ※ 기본키와 고유 인덱스는 데이터의 유일성을 보장하며 데이터 접근을 위한 인덱스 수단으로 쓴다는 공통점이 있지만, 기본키는 NULL 입력이 불가하나 고유 인덱스는 NULL 입력이 가능하다는 차이점이 존재한다.

### 비고유 인덱스
- 고유 인덱스에서 데이터의 유일성만 제외한 키를 의미한다.
- 신규 데이터 입력되더라도 인덱스 열의 중복 체크를 거치지 않고 단순 정렬만 진행한다.

## 서브쿼리
- 서브쿼리란 쿼리안의 보조쿼리를 가리키는 용어다.
- 메인쿼리의 SELECT 절 내부에 포함된 SELECT문을 "스칼라 서브쿼리"라고 부른다.
- FROM절 내부에 포함된 SELECT문을 "인라인 뷰"라고 부른다.
- WHERE절 내부에 포함된 SELECT문을 "중첩 서브쿼리"라고 부른다.

### 스칼라 서브쿼리
- 스칼라 서브쿼리의 결과값은 1행 1열의 구조로 출력되어야만 한다.

### 인라인 뷰
- 인라인 뷰의 결과는 내부적으로 메모리 또는 디스크에 임시 테이블을 생성하여 활용한다.

### 중첩 서브쿼리
- 중첩 서브쿼리와 비교시에는 보통 비교 연산자, IN, NOT IN, EXISTS, NOT EXISTS 문을 사용한다.

### 비상관 서브쿼리
- 서브쿼리가 먼저 실행된 뒤에 그 결과를 메인쿼리가 활용한다.
- 서브쿼리 실행 -> 메인쿼리 실행의 순서로 실행된다.

### 상관 서브쿼리
- 상관 서브쿼리가 실행되려면 메인쿼리의 값을 받아야 하므로 서로 끈끈한 관계를 유지한다.
- 스칼라 서브쿼리 또는 중첩 서브쿼리에서 보통 발생한다.
- 메인쿼리에서 값을받아 서브쿼리를 수행하고 그 결과를 다시 메인쿼리로 전달한다.
- 메인 쿼리 실행(데이터 가져오기) -> 서브쿼리 실행(WHERE절 비교) -> 다시 메인쿼리 실행한 뒤 결과 출력

## Join 종류
- INNER JOIN, LEFT OUTER JOIN, RIGHT OUTER JOIN, CROSS JOIN, NATURAL JOIN